{% extends 'base.html' %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h3>Detalles del Ticket: {{ ticket.folio }}</h3>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <h5>Información General</h5>
                <p><strong>Estado:</strong> <span class="badge bg-primary">{{ ticket.estado.nombre }}</span></p>
                <p><strong>Generado por:</strong> {{ ticket.creado_por.username }}</p>
                <p><strong>Fecha de Creación:</strong> {{ ticket.fecha_creacion|date:"d/m/Y a las H:i" }}</p>
                <p><strong>Última Actualización:</strong> {{ ticket.fecha_actualizacion|date:"d/m/Y a las H:i" }}</p>
            </div>
            <div class="col-md-6">
                <h5>Detalles de la Herramienta</h5>
                <p><strong>Herramienta:</strong> {{ ticket.herramienta.modelo }}</p>
                <p><strong>No. Serie:</strong> {{ ticket.herramienta.numero_serie }}</p>
                <p><strong>Fabricante:</strong> {{ ticket.herramienta.fabricante }}</p>
            </div>
        </div>
        <hr>
        <h5>Descripción de la Falla</h5>
        <p><strong>Código de Falla:</strong> {{ ticket.falla.codigo|default:"N/A" }}</p>
        <p><strong>Descripción:</strong> {{ ticket.falla.descripcion|default:"N/A" }}</p>
        <p><strong>Comentarios Adicionales:</strong></p>
        <p>{{ ticket.comentarios|linebreaksbr }}</p>
    </div>
    <div class="card-footer text-end">
    {% if user.is_staff %}
        <a href="{% url 'dashboard_service_line' %}" class="btn btn-secondary">Volver al Dashboard</a>
    {% else %}
        <a href="{% url 'lista_tickets' %}" class="btn btn-secondary">Volver a la Lista</a>
    {% endif %}
    <a href="{% url 'lista_tickets' %}" class="btn btn-secondary">Volver a la Lista</a>
    <a href="{% url 'editar_ticket' ticket.pk %}" class="btn btn-warning">Editar Ticket</a>

    {% if user.is_staff %}
        <a href="{% url 'eliminar_ticket' ticket.pk %}" class="btn btn-danger">Eliminar Ticket</a>
    {% endif %}
</div>
{% endblock %}


